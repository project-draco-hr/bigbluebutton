{
  byte[] codedBuffer=new byte[length];
  System.arraycopy(audioData,startOffset,codedBuffer,0,length);
  byte[] transcodedAudioData=new byte[sipCodec.getOutgoingEncodedFrameSize()];
  asao_buffer_processed=false;
  if (!hasInitilializedBuffers) {
    tempBuffer=new float[NELLYMOSER_DECODED_PACKET_SIZE];
    encodingBuffer=new float[sipCodec.getOutgoingDecodedFrameSize()];
    hasInitilializedBuffers=true;
  }
  if (length > 0) {
    do {
      int encodedBytes=fillRtpPacketBuffer(codedBuffer,transcodedAudioData);
      if (encodedBytes == 0) {
        break;
      }
      if (encodingOffset == sipCodec.getOutgoingDecodedFrameSize()) {
        encodingOffset=0;
        listener.handleTranscodedAudioData(transcodedAudioData,timestamp+=TS_INCREMENT);
      }
    }
 while (!asao_buffer_processed);
  }
}
