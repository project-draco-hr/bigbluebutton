{
  log.debug("SIPUser hangup");
  CallAgent ca=callManager.remove(clientId);
  if (ca != null) {
    if (ca.isListeningToGlobal()) {
      String destination=ca.getDestination();
      GlobalCall.removeUser(destination);
      ca.hangup();
      boolean roomRemoved=GlobalCall.removeRoomIfUnused(destination);
      if (roomRemoved) {
        CallAgent caGlobal=callManager.remove(destination);
        caGlobal.hangup();
      }
    }
 else {
      ca.hangup();
    }
  }
}
