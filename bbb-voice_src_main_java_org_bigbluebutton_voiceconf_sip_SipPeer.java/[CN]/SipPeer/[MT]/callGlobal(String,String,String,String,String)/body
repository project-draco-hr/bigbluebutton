{
  if (!registered) {
    log.warn("We are not registered to FreeSWITCH. However, we will allow {} to call {}.",callerName,destination);
  }
  SipPeerProfile callerProfile=SipPeerProfile.copy(registeredProfile);
  SipPeerProfile callerProfileGlobal=SipPeerProfile.copy(registeredProfile);
  CallAgent ca=new CallAgent(this.clientRtpIp,sipProvider,callerProfile,audioconfProvider,clientId);
  ca.setLocalSocketRelatedToGlobal();
  CallAgent caGlobal=new CallAgent(this.clientRtpIp,sipProvider,callerProfileGlobal,audioconfProvider,clientIdGlobal);
  ca.setClientConnectionManager(clientConnManager);
  ca.setCallStreamFactory(callStreamFactory);
  caGlobal.setClientConnectionManager(clientConnManager);
  caGlobal.setCallStreamFactory(callStreamFactory);
  callManager.add(ca);
  callManager.addGlobal(caGlobal);
  caGlobal.callGlobal(callerNameGlobal,destination,ca);
}
