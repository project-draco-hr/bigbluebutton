{
  RTMPConnection conn=null;
  if (cls == RTMPMinaConnection.class) {
    conn=(RTMPMinaConnection)appCtx.getBean("rtmpMinaConnection");
  }
 else   if (cls == EdgeRTMPMinaConnection.class) {
    conn=(EdgeRTMPMinaConnection)appCtx.getBean("rtmpEdgeMinaConnection");
  }
 else   if (cls == RTMPTConnection.class) {
    conn=(RTMPTConnection)appCtx.getBean("rtmptConnection");
  }
 else {
    conn=(RTMPConnection)cls.newInstance();
  }
  conn.setSchedulingService((ISchedulingService)appCtx.getBean(ISchedulingService.BEAN_NAME));
  return conn;
}
