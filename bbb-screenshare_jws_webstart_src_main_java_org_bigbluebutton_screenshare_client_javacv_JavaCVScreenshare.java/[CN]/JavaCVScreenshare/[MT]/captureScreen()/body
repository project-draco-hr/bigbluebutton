{
  long now=System.currentTimeMillis();
  BufferedImage currentScreenshot=captureTaker.captureScreen();
  DataBuffer in=currentScreenshot.getData().getDataBuffer();
  byte[] a=((DataBufferByte)in).getData();
  ;
  ByteBuffer bbuffer=ByteBuffer.wrap(a);
  BytePointer bpointer=new BytePointer(bbuffer);
  try {
    recorder.record(bpointer,currentScreenshot.getWidth(),currentScreenshot.getHeight(),AV_PIX_FMT_BGR24);
  }
 catch (  Exception e1) {
    e1.printStackTrace();
  }
  long sleepFramerate=(long)(1000 / frameRate);
  long timestamp=now - startTime;
  recorder.setTimestamp(timestamp * 1000);
  recorder.setFrameNumber(frameNumber);
  frameNumber++;
  long execDuration=(System.currentTimeMillis() - now);
  long sleepDuration=Math.max(sleepFramerate - execDuration,0);
  pause(sleepDuration);
}
