{
  try {
    Class scriptClassToExecute=null;
synchronized (this.scriptClassMonitor) {
      if (this.scriptClass == null || scriptSource.isModified()) {
        this.scriptClass=this.groovyClassLoader.parseClass(scriptSource.getScriptAsString());
        if (Script.class.isAssignableFrom(this.scriptClass)) {
          Object result=executeScript(this.scriptClass);
          this.scriptResultClass=(result != null ? result.getClass() : null);
          return result;
        }
 else {
          this.scriptResultClass=this.scriptClass;
        }
      }
      scriptClassToExecute=this.scriptClass;
    }
    return executeScript(scriptClassToExecute);
  }
 catch (  CompilationFailedException ex) {
    throw new ScriptCompilationException("Could not compile Groovy script: " + scriptSource,ex);
  }
}
