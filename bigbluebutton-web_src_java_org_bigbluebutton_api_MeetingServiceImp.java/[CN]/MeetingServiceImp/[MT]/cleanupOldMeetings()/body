{
  log.debug("Cleaning out old conferences");
  for (  Meeting m : meetings.values()) {
    boolean remove=false;
    if (m.isRunning()) {
      log.debug("Meeting [" + m.getInternalId() + "] is running - not cleaning it out");
      continue;
    }
    long now=System.currentTimeMillis();
    long millisSinceStored=now - m.getCreateTime();
    long millisSinceEnd=now - m.getEndTime();
    if (m.getStartTime() > 0 && millisSinceEnd > (minutesElapsedBeforeMeetingExpiration * 60000)) {
      log.debug("Removing meeting because it started, ended, and is past the max expiration");
      remove=true;
    }
 else     if (m.getEndTime() > 0 && millisSinceStored > (minutesElapsedBeforeMeetingExpiration * 60000)) {
      log.debug("Removing meeting because it was stored, but never started [stored " + millisSinceStored + " millis ago]");
      remove=true;
    }
    if (remove) {
      log.debug("Removing meeting [" + m.getInternalId() + "]");
      meetings.remove(m.getInternalId());
    }
 else {
      log.debug("Not removing meeting [" + m.getInternalId() + "]");
    }
  }
}
