{
  log.debug("{}",this);
  String key=getKey(hostName,contextPath);
  while (contextPath.indexOf(SLASH) != -1) {
    key=getKey(hostName,contextPath);
    if (log.isDebugEnabled()) {
      log.debug("Check: " + key);
    }
    String globalName=mapping.get(key);
    if (globalName != null) {
      return getGlobal(globalName);
    }
    final int slashIndex=contextPath.lastIndexOf(SLASH);
    contextPath=contextPath.substring(0,slashIndex);
  }
  key=getKey(hostName,contextPath);
  if (log.isDebugEnabled()) {
    log.debug("Check host and path: " + key);
  }
  String globalName=mapping.get(key);
  if (globalName != null) {
    return getGlobal(globalName);
  }
  key=getKey(EMPTY,contextPath);
  if (log.isDebugEnabled()) {
    log.debug("Check wildcard host with path: " + key);
  }
  globalName=mapping.get(key);
  if (globalName != null) {
    return getGlobal(globalName);
  }
  key=getKey(hostName,EMPTY);
  if (log.isDebugEnabled()) {
    log.debug("Check host with no path: " + key);
  }
  globalName=mapping.get(key);
  if (globalName != null) {
    return getGlobal(globalName);
  }
  key=getKey(EMPTY,EMPTY);
  if (log.isDebugEnabled()) {
    log.debug("Check default host, default path: " + key);
  }
  return getGlobal(mapping.get(key));
}
