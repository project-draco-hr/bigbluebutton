{
  byte[] encoded;
synchronized (stringCache) {
    encoded=stringCache.get(string);
  }
  if (encoded == null) {
    java.nio.ByteBuffer buf=AMF3.CHARSET.encode(string);
    encoded=new byte[buf.limit()];
    buf.get(encoded);
synchronized (stringCache) {
      stringCache.put(string,encoded);
    }
  }
  return encoded;
}
