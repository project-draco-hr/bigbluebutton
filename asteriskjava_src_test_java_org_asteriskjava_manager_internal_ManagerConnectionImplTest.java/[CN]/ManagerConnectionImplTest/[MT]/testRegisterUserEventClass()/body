{
  ManagerReader managerReader;
  managerReader=createMock(ManagerReader.class);
  managerReader.registerEventClass(MyUserEvent.class);
  replay(managerReader);
  mc=new MockedManagerConnectionImpl(managerReader,mockWriter,mockSocket);
  mc.registerUserEventClass(MyUserEvent.class);
  assertEquals("unexpected call to createSocket",0,mc.createSocketCalls);
  assertEquals("unexpected call to createWriter",0,mc.createWriterCalls);
  assertEquals("createReader not called 1 time",1,mc.createReaderCalls);
  verify(managerReader);
}
