{
  replay(mockSocket);
  try {
    mc.logoff();
    fail("Expected IllegalStateException when calling logoff when not connected");
  }
 catch (  IllegalStateException e) {
  }
  assertEquals("unexpected logoff action sent",0,mockWriter.logoffActionsSent);
  verify(mockSocket);
}
