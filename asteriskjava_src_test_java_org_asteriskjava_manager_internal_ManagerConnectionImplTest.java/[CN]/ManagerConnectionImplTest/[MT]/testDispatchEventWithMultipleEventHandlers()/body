{
  final int count=20;
  ManagerEvent event;
  final List<Integer> list;
  event=new NewChannelEvent(this);
  list=createMock(List.class);
  for (int i=0; i < count; i++) {
    final int index=i;
    expect(list.add(index)).andReturn(true);
    mc.addEventListener(new ManagerEventListener(){
      public void onManagerEvent(      ManagerEvent event){
        list.add(index);
      }
    }
);
  }
  replay(list);
  mc.dispatchEvent(event);
  verify(list);
}
