{
  if (log.isDebugEnabled()) {
    log.debug("messageRecieved");
  }
  final ProtocolState state=(ProtocolState)session.getAttribute(ProtocolState.SESSION_KEY);
  if (in instanceof ByteBuffer) {
    rawBufferRecieved(state,(ByteBuffer)in,session);
    return;
  }
  final RTMPMinaConnection conn=(RTMPMinaConnection)session.getAttachment();
  handler.messageReceived(conn,state,in);
}
