{
  if (channel.equalsIgnoreCase(MessagingConstants.ANTON_CHANNEL)) {
    System.out.println("AntonChannel=(chatlistener)" + channel);
    JsonParser parser=new JsonParser();
    JsonObject obj=(JsonObject)parser.parse(message);
    JsonObject headerObject=(JsonObject)obj.get("header");
    JsonObject payloadObject=(JsonObject)obj.get("payload");
    JsonObject messageObject=(JsonObject)payloadObject.get("message");
    String eventName=headerObject.get("name").toString();
    eventName=eventName.replace("\"","");
    if (eventName.equalsIgnoreCase("public_chat_message_event") || eventName.equalsIgnoreCase("send_public_chat_message") || eventName.equalsIgnoreCase("private_chat_message_event")|| eventName.equalsIgnoreCase("send_private_chat_message")) {
      String meetingID=payloadObject.get("meeting_id").toString().replace("\"","");
      String requesterID=payloadObject.get("requester_id").toString().replace("\"","");
      String chatType=messageObject.get("chatType").toString().replace("\"","");
      String fromUserID=messageObject.get("fromUserID").toString().replace("\"","");
      String fromUsername=messageObject.get("fromUsername").toString().replace("\"","");
      String fromColor=messageObject.get("fromColor").toString().replace("\"","");
      String fromTime=messageObject.get("fromTime").toString().replace("\"","");
      String fromTimezoneOffset=messageObject.get("fromTimezoneOffset").toString().replace("\"","");
      String fromLang=messageObject.get("fromLang").toString().replace("\"","");
      String toUserID=messageObject.get("toUserID").toString().replace("\"","");
      String toUsername=messageObject.get("toUsername").toString().replace("\"","");
      String chatText=messageObject.get("message").toString().replace("\"","");
      Map<String,String> map=new HashMap<String,String>();
      map.put(ChatKeyUtil.CHAT_TYPE,chatType);
      map.put(ChatKeyUtil.FROM_USERID,fromUserID);
      map.put(ChatKeyUtil.FROM_USERNAME,fromUsername);
      map.put(ChatKeyUtil.FROM_COLOR,fromColor);
      map.put(ChatKeyUtil.FROM_TIME,fromTime);
      map.put(ChatKeyUtil.FROM_TZ_OFFSET,fromTimezoneOffset);
      map.put(ChatKeyUtil.FROM_LANG,fromLang);
      map.put(ChatKeyUtil.TO_USERID,toUserID);
      map.put(ChatKeyUtil.TO_USERNAME,toUsername);
      map.put(ChatKeyUtil.MESSAGE,chatText);
      if (eventName.equalsIgnoreCase("public_chat_message_event") || eventName.equalsIgnoreCase("send_public_chat_message")) {
        System.out.println("I'm in the case for a public chat message");
        bbbGW.sendPublicMessage(meetingID,requesterID,map);
      }
 else       if (eventName.equalsIgnoreCase("private_chat_message_event") || eventName.equalsIgnoreCase("send_private_chat_message")) {
        System.out.println("I'm in the case for a private chat message");
        bbbGW.sendPrivateMessage(meetingID,requesterID,map);
      }
 else       if (eventName.equalsIgnoreCase("get_chat_history")) {
        System.out.println("I'm in the case for a requesting chat history");
        bbbGW.getChatHistory(meetingID,requesterID);
      }
    }
  }
}
