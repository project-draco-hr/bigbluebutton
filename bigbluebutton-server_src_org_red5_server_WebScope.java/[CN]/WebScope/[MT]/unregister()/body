{
  if (!registered) {
    return;
  }
  shuttingDown=true;
  keepOnDisconnect=false;
  uninit();
  Iterator<IConnection> iter=getConnections();
  while (iter.hasNext()) {
    IConnection conn=iter.next();
    conn.close();
  }
  if (hostnames != null && hostnames.length > 0) {
    for (    String element : hostnames) {
      server.removeMapping(element,getName());
    }
  }
  if (appContext != null) {
    appContext.stop();
  }
  setStore(null);
  super.setParent(null);
  setServletContext(null);
  setServer(null);
  setName(null);
  appContext=null;
  registered=false;
  shuttingDown=false;
}
