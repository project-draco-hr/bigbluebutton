{
  try {
    fo=new FileOutputStream(flvFilename);
    fo.write(svf.encodeHeader());
  }
 catch (  FileNotFoundException e1) {
    log.error(StackTraceUtil.getStackTrace(e1));
  }
catch (  IOException e) {
    log.error(StackTraceUtil.getStackTrace(e));
  }
  sendCapturedScreen=true;
  log.info("Starting stream");
  capturedScreenSender=new Runnable(){
    public void run(){
      while (sendCapturedScreen) {
        try {
          IoBuffer frame=screenQueue.take();
          recordFrameToFile(frame);
        }
 catch (        InterruptedException e) {
          log.info("InterruptedExeption while taking event.");
        }
      }
    }
  }
;
  exec.execute(capturedScreenSender);
}
