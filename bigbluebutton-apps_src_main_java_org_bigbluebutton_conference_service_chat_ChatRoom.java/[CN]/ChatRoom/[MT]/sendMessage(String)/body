{
  if (messages == null) {
    messages=msg;
  }
 else {
    messages+=msg;
  }
  for (Iterator iter=listeners.values().iterator(); iter.hasNext(); ) {
    log.debug("calling on listener");
    IChatRoomListener listener=(IChatRoomListener)iter.next();
    log.debug("calling newChatMessage on listener {}",listener.getName());
    listener.newChatMessage(msg);
  }
}
