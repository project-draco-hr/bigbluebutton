{
  rwLock.readLock().lock();
  try {
    String canonicalPath=file.getCanonicalPath();
    if (!inMemoryMetaCache.containsKey(canonicalPath)) {
      rwLock.readLock().unlock();
      rwLock.writeLock().lock();
      try {
        if (inMemoryMetaCache.size() >= maxCacheEntry) {
          freeCachingMetadata();
        }
        KeyFrameMeta keyFrameMeta=super.loadKeyFrameMeta(file);
        if (keyFrameMeta != null) {
          inMemoryMetaCache.put(canonicalPath,keyFrameMeta);
        }
 else {
          return null;
        }
      }
  finally {
        rwLock.writeLock().unlock();
        rwLock.readLock().lock();
      }
    }
    return inMemoryMetaCache.get(canonicalPath);
  }
 catch (  IOException e) {
    return null;
  }
 finally {
    rwLock.readLock().unlock();
  }
}
