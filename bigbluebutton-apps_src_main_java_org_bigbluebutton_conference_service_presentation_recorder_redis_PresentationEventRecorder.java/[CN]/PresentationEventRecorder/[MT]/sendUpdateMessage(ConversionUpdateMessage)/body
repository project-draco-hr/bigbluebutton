{
  if (msg.isRecorded()) {
    Map<String,Object> message=msg.getMessage();
    String messageKey=(String)message.get("messageKey");
    if (messageKey.equalsIgnoreCase(GENERATED_SLIDE_KEY)) {
      GenerateSlidePresentationRecordEvent event=new GenerateSlidePresentationRecordEvent();
      event.setMeetingId(msg.getMeetingID());
      event.setTimestamp(System.currentTimeMillis());
      event.setPresentationName((String)message.get("presentationName"));
      event.setNumberOfPages((Integer)message.get("numberOfPages"));
      event.setPagesCompleted((Integer)message.get("pagesCompleted"));
      recorder.record(msg.getMeetingID(),event);
    }
 else     if (messageKey.equalsIgnoreCase(CONVERSION_COMPLETED_KEY)) {
      ConversionCompletedPresentationRecordEvent event=new ConversionCompletedPresentationRecordEvent();
      event.setMeetingId(msg.getMeetingID());
      event.setTimestamp(System.currentTimeMillis());
      event.setPresentationName((String)message.get("presentationName"));
      event.setSlidesInfo((String)message.get("slidesInfo"));
      recorder.record(msg.getMeetingID(),event);
    }
  }
}
