{
  this.file=file;
  this.generateMetadata=generateMetadata;
  int count=0;
  if (!generateMetadata) {
    try {
      FLVReader reader=new FLVReader(this.file);
      ITag tag=null;
      while (reader.hasMoreTags() && (++count < 5)) {
        tag=reader.readTag();
        if (tag.getDataType() == IoConstants.TYPE_METADATA) {
          if (metaService == null)           metaService=new MetaService(this.file);
          metaData=metaService.readMetaData(tag.getBody());
        }
      }
      reader.close();
    }
 catch (    Exception e) {
      log.error("An error occured looking for metadata:",e);
    }
  }
}
