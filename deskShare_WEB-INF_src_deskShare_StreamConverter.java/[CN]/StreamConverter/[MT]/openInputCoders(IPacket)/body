{
{
    IStreamCoder videoCoder=null;
    if (mVideoStreamId == -1) {
      int numStreams=mInContainer.getNumStreams();
      log.debug("found {} streams in {}",numStreams,mInputURL);
      for (int i=0; i < numStreams; i++) {
        IStream stream=mInContainer.getStream(i);
        if (stream != null) {
          log.debug("found stream #{} in {}",i,mInputURL);
          IStreamCoder coder=stream.getStreamCoder();
          if (coder != null) {
            log.debug("got stream coder {} (type: {}) in {}",new Object[]{coder,coder.getCodecType(),mInputURL});
            if (coder.getCodecType() == ICodec.Type.CODEC_TYPE_VIDEO && mVideoStreamId == -1 && packet.getStreamIndex() == i) {
              log.debug("found video stream: {} in {}",i,mInputURL);
              if (coder.getCodec() != null) {
                videoCoder=coder;
                mVideoStreamId=i;
              }
 else {
                log.error("could not find codec for video stream: {}, {}",i,coder.getCodecID());
                throw new RuntimeException("Could not find codec for video stream");
              }
            }
          }
        }
      }
    }
    if (mVideoStreamId != -1 && mInVideoCoder == null) {
      log.debug("opening input video coder; codec id: {}; actual codec: {}; width: {}; height: {}",new Object[]{videoCoder.getCodecID(),videoCoder.getCodec().getID(),videoCoder.getWidth(),videoCoder.getHeight()});
      if (videoCoder.open() < 0)       throw new RuntimeException("could not open video coder for stream: " + mVideoStreamId);
      mInVideoCoder=videoCoder;
    }
  }
}
