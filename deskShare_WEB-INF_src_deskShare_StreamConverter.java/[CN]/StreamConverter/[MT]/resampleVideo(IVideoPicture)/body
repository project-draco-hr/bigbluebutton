{
  IVideoPicture reSample;
  openVideoResampler(picture);
  if (mVideoResampler != null) {
    log.debug("ready to resample video");
    IVideoPicture outPicture=IVideoPicture.make(mOutVideoCoder.getPixelType(),mOutVideoCoder.getWidth(),mOutVideoCoder.getHeight());
    IVideoPicture preResample=picture;
    if (mVideoPictureListener != null) {
      try {
        preResample=mVideoPictureListener.preResample(picture);
        if (preResample == null)         preResample=picture;
      }
  finally {
      }
    }
    int retval=-1;
    try {
      retval=mVideoResampler.resample(outPicture,preResample);
    }
  finally {
    }
    if (retval < 0)     throw new RuntimeException("could not resample video");
    log.debug("resampled input picture (type: {}; width: {}; height: {}) to output (type: {}; width: {}; height: {})",new Object[]{preResample.getPixelType(),preResample.getWidth(),preResample.getHeight(),outPicture.getPixelType(),outPicture.getWidth(),outPicture.getHeight()});
    IVideoPicture postResample=outPicture;
    if (mVideoPictureListener != null) {
      try {
        postResample=mVideoPictureListener.postResample(outPicture);
        if (postResample == null)         postResample=outPicture;
      }
  finally {
      }
    }
    reSample=postResample;
  }
 else {
    reSample=picture;
  }
  return reSample;
}
