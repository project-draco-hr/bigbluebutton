{
  int packetReceivedCounter=0;
  int internalBufferLength=payloadLength + RTP_HEADER_SIZE;
  while (receivePackets) {
    try {
      byte[] internalBuffer=new byte[internalBufferLength];
      RtpPacket rtpPacket=new RtpPacket(internalBuffer,0);
      System.out.println("Waiting for RTP packet [" + rtpPacket.getLength() + ","+ rtpPacket.getPayloadLength()+ ","+ internalBufferLength+ "]");
      rtpSocket.receive(rtpPacket);
      packetReceivedCounter++;
      System.out.println("Received RTP packet [" + rtpPacket.getLength() + ","+ rtpPacket.getPayloadLength()+ "]");
      transcoder.transcode(rtpPacket.getPayload());
    }
 catch (    IOException e) {
      receivePackets=false;
    }
  }
  log.debug("Rtp Receiver stopped.");
  log.debug("Packet Received = " + packetReceivedCounter + ".");
  if (listener != null)   listener.onStoppedReceiving();
}
