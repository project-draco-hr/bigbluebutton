{
  log.debug("read bean");
  storeReference(bean);
  Class theClass=bean.getClass();
  while (hasMoreProperties()) {
    String name=readPropertyName();
    Class t=getPropertyType(bean,name);
    log.debug("property: {}",name);
    Object property=deserializer.deserialize(this,t);
    log.debug("val: {}",property);
    try {
      if (property != null) {
        try {
          final Field field=theClass.getField(name);
          if (!t.isAssignableFrom(property.getClass())) {
            property=ConversionUtils.convert(property,t);
          }
          field.set(bean,property);
        }
 catch (        Exception ex2) {
          BeanUtils.setProperty(bean,name,property);
        }
      }
 else {
        log.debug("Skipping null property: {}",name);
      }
    }
 catch (    Exception ex) {
      log.error("Error mapping property: {} ({})",name,property);
    }
    if (hasMoreProperties()) {
      skipPropertySeparator();
    }
  }
  skipEndObject();
  return bean;
}
