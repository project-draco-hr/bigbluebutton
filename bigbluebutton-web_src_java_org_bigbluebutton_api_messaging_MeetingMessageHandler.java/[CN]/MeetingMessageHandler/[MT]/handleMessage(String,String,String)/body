{
  Gson gson=new Gson();
  JsonParser parser=new JsonParser();
  JsonObject obj=(JsonObject)parser.parse(message);
  if (obj.has("header"))   return;
  if (channel.equalsIgnoreCase(MessagingConstants.FROM_MEETING_CHANNEL)) {
    HashMap<String,String> map=gson.fromJson(message,new TypeToken<Map<String,String>>(){
    }
.getType());
    String messageId=map.get("messageID");
    for (    MessageListener listener : listeners) {
      if (MessagingConstants.MEETING_STARTED_EVENT.equalsIgnoreCase(messageId)) {
        String meetingId=map.get("meetingID");
        listener.handle(new MeetingStarted(meetingId));
      }
 else       if (MessagingConstants.MEETING_ENDED_EVENT.equalsIgnoreCase(messageId)) {
        String meetingId=map.get("meetingID");
        listener.handle(new MeetingEnded(meetingId));
      }
 else       if (MessagingConstants.MEETING_DESTROYED_EVENT.equalsIgnoreCase(messageId)) {
        String meetingId=map.get("meetingID");
        log.info("Received a meeting destroyed message for meeting id=[{}]",meetingId);
        listener.handle(new MeetingDestroyed(meetingId));
      }
    }
  }
 else   if (channel.equalsIgnoreCase(MessagingConstants.FROM_SYSTEM_CHANNEL)) {
    HashMap<String,String> map=gson.fromJson(message,new TypeToken<Map<String,String>>(){
    }
.getType());
    String messageId=map.get("messageID");
    for (    MessageListener listener : listeners) {
      if (MessagingConstants.KEEP_ALIVE_REPLY_EVENT.equalsIgnoreCase(messageId)) {
        String pongId=map.get("aliveID");
        listener.handle(new KeepAliveReply(pongId));
      }
    }
  }
 else   if (channel.equalsIgnoreCase(MessagingConstants.FROM_USERS_CHANNEL)) {
    HashMap<String,String> map=gson.fromJson(message,new TypeToken<Map<String,String>>(){
    }
.getType());
    String messageId=map.get("messageID");
    for (    MessageListener listener : listeners) {
      if (MessagingConstants.USER_JOINED_EVENT.equalsIgnoreCase(messageId)) {
        String meetingId=map.get("meetingID");
        String userId=map.get("internalUserID");
        String externalUserId=map.get("externalUserID");
        String name=map.get("fullname");
        String role=map.get("role");
        listener.handle(new UserJoined(meetingId,userId,externalUserId,name,role));
      }
 else       if (MessagingConstants.USER_STATUS_CHANGE_EVENT.equalsIgnoreCase(messageId)) {
        String userId=map.get("internalUserID");
        String status=map.get("status");
        String value=map.get("value");
        String meetingId=map.get("meetingID");
        listener.handle(new UserStatusChanged(meetingId,userId,status,value));
      }
 else       if (MessagingConstants.USER_LEFT_EVENT.equalsIgnoreCase(messageId)) {
        String userId=map.get("internalUserID");
        String meetingId=map.get("meetingID");
        listener.handle(new UserLeft(meetingId,userId));
      }
    }
  }
}
