{
  String event=request.getParameterValues("event")[0];
  int captureRequest=Integer.parseInt(event);
  if (0 == captureRequest) {
    handleCaptureStartRequest(request,response);
    response.setStatus(HttpServletResponse.SC_OK);
  }
 else   if (1 == captureRequest) {
    handleCaptureUpdateRequest(request,response);
    response.setStatus(HttpServletResponse.SC_OK);
    SharingStatus sharingStatus=getSharingStatus(request,response);
    if (sharingStatus.sharingStopped) {
      log.warn("SHARING_STOPPED " + sharingStatus.sharingStopped);
      response.addHeader("SHARING_STOPPED","true");
    }
 else     if (sharingStatus.sharingPaused) {
      log.warn("SHARING_PAUSED " + sharingStatus.sharingPaused);
      response.addHeader("SHARING_PAUSED","true");
    }
  }
 else   if (2 == captureRequest) {
    handleCaptureEndRequest(request,response);
    response.setStatus(HttpServletResponse.SC_OK);
  }
 else {
    log.warn("Cannot handle screen capture event " + captureRequest);
    response.setStatus(HttpServletResponse.SC_OK);
  }
  return null;
}
