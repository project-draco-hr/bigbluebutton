{
  if (params == null || params.length == 0) {
    log.debug("Client didn't pass a username.");
    rejectClient("No username passed.");
  }
  if (!super.connect(conn,scope,params)) {
    return false;
  }
  String username=params[0].toString();
  String uid=conn.getClient().getId();
  if (log.isDebugEnabled()) {
    log.debug("Client \"{}\" ({}) connected.",new Object[]{username,uid});
  }
  clientMgr.addClient(scope,username,uid);
  ServiceUtils.invokeOnConnection(conn,"setClientID",new Object[]{uid});
  return true;
}
