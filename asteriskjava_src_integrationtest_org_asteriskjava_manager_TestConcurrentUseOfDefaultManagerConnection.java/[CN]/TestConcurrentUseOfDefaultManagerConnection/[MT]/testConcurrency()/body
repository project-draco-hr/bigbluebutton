{
  Thread[] threads=new Thread[NUM_THREADS];
  long start;
  long end;
  dmc.addEventListener(new ManagerEventListener(){
    public void onManagerEvent(    ManagerEvent event){
    }
  }
);
  dmc.setDefaultEventTimeout(20000);
  dmc.setDefaultResponseTimeout(20000);
  for (int i=0; i < NUM_THREADS; i++) {
    threads[i]=new Thread(new Sender());
    threads[i].setName("Sender-" + i);
  }
  start=System.currentTimeMillis();
  for (int i=0; i < NUM_THREADS; i++) {
    threads[i].start();
  }
  for (int i=0; i < NUM_THREADS; i++) {
    threads[i].join();
  }
  end=System.currentTimeMillis();
  Thread.sleep(1000);
  System.out.println("succeeded: " + succeeded);
  System.out.println("failed:    " + failed);
  System.out.println("total:     " + total);
  System.out.println("duration:  " + (end - start));
  assertEquals("failed actions",0,failed.get());
}
