{
  log.debug("startTranscodingStream({},{})",broadcastStream.getPublishedName(),scope.getName());
  mInputListener=new IStreamListener(){
    public void packetReceived(    IBroadcastStream broadcastStream,    IStreamPacket packet){
      IoBuffer buf=packet.getData();
      if (buf != null)       buf.rewind();
      if (buf == null || buf.remaining() == 0) {
        log.debug("skipping empty packet with no data");
        return;
      }
      if (packet instanceof AudioData) {
        byte[] data=SerializeUtils.ByteBufferToByteArray(buf);
        System.out.println("Speex header " + data[0] + " packet length "+ (data.length - 1));
        byte[] audioData=transcoder.transcodeAudio(data,1,data.length - 1);
        if (audioData != null) {
          rtpSender.sendAudio(audioData,transcoder.getCodecId());
        }
 else {
          log.warn("Transcodec audio is null. Discarding.");
        }
      }
    }
  }
;
  broadcastStream.addStreamListener(mInputListener);
  rtpSender=new RtpStreamSender(srcSocket,connInfo);
  rtpSender.connect();
}
