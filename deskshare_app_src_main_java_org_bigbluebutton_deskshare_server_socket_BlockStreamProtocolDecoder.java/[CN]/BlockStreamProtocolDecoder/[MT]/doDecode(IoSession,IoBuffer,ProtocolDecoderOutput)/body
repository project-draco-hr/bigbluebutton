{
  if (in.remaining() < 10)   return false;
  byte[] header=new byte[HEADER.length];
  int start=in.position();
  in.get(header,0,HEADER.length);
  int messageLength=in.getInt();
  if (in.remaining() < messageLength) {
    in.position(start);
    return false;
  }
  Integer numMsg=(Integer)session.getAttribute("NUM_MSG",0);
  numMsg++;
  session.setAttribute("NUM_MSG",numMsg);
  decodeMessage(session,in,out);
  return true;
}
