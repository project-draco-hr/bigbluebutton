{
  String status=annotation.getStatus();
  if ("textCreated".equals(status)) {
    roomManager.getRoom(getMeetingId()).addAnnotation(annotation);
  }
 else   if (PENCIL_TYPE.equals(annotation.getType()) && "DRAW_START".equals(status)) {
    roomManager.getRoom(getMeetingId()).addAnnotation(annotation);
  }
 else   if ("DRAW_END".equals(status) && (RECTANGLE_TYPE.equals(annotation.getType()) || ELLIPSE_TYPE.equals(annotation.getType()) || TRIANGLE_TYPE.equals(annotation.getType())|| LINE_TYPE.equals(annotation.getType()))) {
    roomManager.getRoom(getMeetingId()).addAnnotation(annotation);
  }
 else {
    if ("text".equals(annotation.getType())) {
      roomManager.getRoom(getMeetingId()).modifyText(annotation);
    }
  }
  ClientMessage m=new ClientMessage(ClientMessage.BROADCAST,getMeetingId(),"WhiteboardNewAnnotationCommand",annotation.getAnnotation());
  connInvokerService.sendMessage(m);
}
