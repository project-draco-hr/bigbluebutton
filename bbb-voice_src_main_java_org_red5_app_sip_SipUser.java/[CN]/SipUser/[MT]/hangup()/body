{
  log.debug("SIPUser hangup");
  if (userAgent != null) {
    if (userAgent.call_state != UserAgent.UA_IDLE) {
      userAgent.hangup();
      userAgent.waitForIncomingCalls();
    }
  }
  closeStreams();
  rtmpUser.stopStream();
}
