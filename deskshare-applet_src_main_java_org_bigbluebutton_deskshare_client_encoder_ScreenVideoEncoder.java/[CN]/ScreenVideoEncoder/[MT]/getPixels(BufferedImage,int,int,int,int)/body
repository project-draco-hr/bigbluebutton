{
  int[] pixels=new int[width * height];
  PixelGrabber pg=new PixelGrabber(image,x,y,width,height,pixels,0,width);
  try {
    pg.grabPixels();
  }
 catch (  InterruptedException e) {
    throw new PixelExtractException("Interrupted waiting for pixels!");
  }
  if ((pg.getStatus() & ImageObserver.ABORT) != 0) {
    throw new PixelExtractException("Aborted or error while fetching image.");
  }
  return pixels;
}
