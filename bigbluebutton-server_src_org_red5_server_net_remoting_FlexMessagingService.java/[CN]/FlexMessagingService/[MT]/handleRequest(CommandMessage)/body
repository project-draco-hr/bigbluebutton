{
  setClientId(msg);
  AsyncMessage result=null;
switch (msg.operation) {
case Constants.OPERATION_PING:
    result=new AcknowledgeMessage();
  result.clientId=msg.clientId;
result.correlationId=msg.messageId;
break;
case Constants.OPERATION_REGISTER:
result=new AcknowledgeMessage();
result.clientId=msg.clientId;
result.correlationId=msg.messageId;
break;
case Constants.OPERATION_POLL:
result=new AcknowledgeMessage();
result.clientId=msg.clientId;
result.correlationId=msg.messageId;
result.destination=msg.destination;
break;
default :
log.error("Unknown CommandMessage request: " + msg);
result=returnError(msg,"notImplemented","Don't know how to handle " + msg,"Don't know how to handle " + msg);
}
return result;
}
