{
  try {
    URL url=new URL("http://" + host + "/deskshare/tunnel/screen");
    URLConnection conn=url.openConnection();
    ClientHttpRequest chr=new ClientHttpRequest(conn);
    chr.setParameter("room",room);
    chr.setParameter("videoInfo",videoInfo);
    chr.setParameter("startCapture",new Boolean(startCapture).toString());
    System.out.println("Start capture = " + startCapture);
    if (startCapture) {
      startCapture=false;
    }
    ByteArrayOutputStream byteConvert=new ByteArrayOutputStream();
    ImageIO.write(screenCapture,"jpeg",byteConvert);
    byte[] imageData=byteConvert.toByteArray();
    ByteArrayInputStream cap=new ByteArrayInputStream(imageData);
    chr.setParameter("upload","screen",cap);
    System.out.println("Image length = " + imageData.length);
    chr.post();
  }
 catch (  UnsupportedEncodingException e) {
    e.printStackTrace();
  }
catch (  MalformedURLException e) {
    e.printStackTrace();
  }
catch (  IOException e) {
    e.printStackTrace();
  }
}
