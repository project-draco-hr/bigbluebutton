{
  if (!REQUEST_METHOD.equals(req.getMethod()) || req.getContentLength() == 0 || !CONTENT_TYPE.equals(req.getContentType())) {
    handleBadRequest("Bad request, only RTMPT supported.",resp);
    return;
  }
  String path=req.getServletPath();
  char p=path.charAt(1);
switch (p) {
case 'o':
    handleOpen(req,resp);
  break;
case 'c':
handleClose(req,resp);
break;
case 's':
handleSend(req,resp);
break;
case 'i':
handleIdle(req,resp);
break;
default :
handleBadRequest("RTMPT command " + path + " is not supported.",resp);
}
}
