{
  boolean present=false;
  User p=null;
synchronized (this) {
    present=users.containsKey(userid);
    if (present) {
      log.debug("removing participant");
      p=users.remove(userid);
    }
  }
  if (present) {
    for (Iterator it=listeners.values().iterator(); it.hasNext(); ) {
      IRoomListener listener=(IRoomListener)it.next();
      log.debug("calling participantLeft on listener " + listener.getName());
      listener.participantLeft(p);
    }
  }
}
