{
  final Map<String,Object> result=new HashMap<String,Object>();
synchronized (session) {
    final Enumeration<String> names=session.getAttributeNames();
    while (names.hasMoreElements()) {
      final String name=names.nextElement();
      result.put(name,session.getAttribute(name));
    }
  }
  return Collections.unmodifiableMap(result);
}
