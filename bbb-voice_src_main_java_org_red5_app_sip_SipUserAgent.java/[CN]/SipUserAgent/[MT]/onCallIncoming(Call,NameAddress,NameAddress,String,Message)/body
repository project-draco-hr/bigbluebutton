{
  log.debug("onCallIncoming");
  if (call != this.call) {
    log.debug("NOT the current call.");
    return;
  }
  log.debug("Inside SIPUserAgent.onCallIncoming(): sdp=\n" + sdp);
  changeStatus(UA_INCOMING_CALL);
  call.ring();
  if (sdp != null) {
    SessionDescriptor remoteSdp=new SessionDescriptor(sdp);
    SessionDescriptor localSdp=new SessionDescriptor(localSession);
    log.debug("localSdp = " + localSdp.toString() + ".");
    log.debug("remoteSdp = " + remoteSdp.toString() + ".");
    SessionDescriptor newSdp=SdpUtils.makeMediaPayloadsNegotiation(localSdp,remoteSdp);
    sipCodec=SdpUtils.getNegotiatedAudioCodec(newSdp);
    SdpUtils.completeSdpNegotiation(newSdp,localSdp,remoteSdp);
    localSession=newSdp.toString();
    log.debug("newSdp = " + localSession + ".");
    CodecUtils.initSipAudioCodec(sipCodec,userProfile.audioDefaultPacketization,userProfile.audioDefaultPacketization,newSdp,remoteSdp);
  }
  if (listener != null) {
    listener.onUaCallIncoming(this,callee,caller);
  }
}
