{
  IBWControllable bc=this.bc;
  while (bc != null) {
    BWContext context=contextMap.get(bc);
    if (context == null) {
      break;
    }
synchronized (context) {
      List<TokenRequest> pendingList=context.pendingRequestArray[channel];
      TokenRequest toRemove=null;
      for (      TokenRequest request : pendingList) {
        if (request.initialBC == this.bc) {
          rollbackRequest(request);
          toRemove=request;
          break;
        }
      }
      if (toRemove != null) {
        pendingList.remove(toRemove);
        try {
          toRemove.callback.reset(this,(long)toRemove.requestToken);
        }
 catch (        Throwable t) {
          log.error("Error reset request's callback",t);
        }
        break;
      }
    }
    bc=bc.getParentBWControllable();
  }
}
