def main():
    redisHost = ''
    redisPort = 0
    archiveDir = ''
    meetingId = ''
    try:
        (opts, args) = getopt.getopt(sys.argv[1:], 'hm:r:p:a:', ['help', 'meeting-id=', 'redis-host=', 'redis-port=', 'archive-dir='])
    except getopt.GetoptError as err:
        print str(err)
        usage()
        sys.exit(2)
    for (o, a) in opts:
        if (o in ('-h', '--help')):
            usage()
            sys.exit()
        elif (o in ('-m', '--redis-host')):
            meetingId = a
        elif (o in ('-r', '--redis-host')):
            redisHost = a
        elif (o in ('-p', '--redis-port')):
            redisPort = a
        elif (o in ('-a', '--archive-dir')):
            archiveDir = a
        else:
            assert False, 'unhandled option'
    printUsage = False
    if (meetingId == ''):
        print 'Missing meeting id.'
        printUsage = True
    if (redisHost == ''):
        print 'Missing redis host.'
        printUsage = True
    if (redisPort == 0):
        print 'Missing redis port.'
        printUsage = True
    if (archiveDir == ''):
        print 'Missing archive dir.'
        printUsage = True
    if printUsage:
        printUsageHelp()
    print meetingId
    print redisHost
    print redisPort
    print archiveDir
    generate_events_xml(redisHost, int(redisPort), meetingId, archiveDir)
