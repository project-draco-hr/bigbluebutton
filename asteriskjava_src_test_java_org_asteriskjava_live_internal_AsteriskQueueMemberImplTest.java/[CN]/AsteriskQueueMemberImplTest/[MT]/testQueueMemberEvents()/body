{
  assertEquals(QueueMemberState.DEVICE_UNKNOWN,queueMember.getState());
  queueMember.addPropertyChangeListener(new PropertyChangeListener(){
    public void propertyChange(    PropertyChangeEvent evt){
      assertEquals("wrong propertyName","state",evt.getPropertyName());
      assertEquals("wrong oldValue",QueueMemberState.DEVICE_UNKNOWN,evt.getOldValue());
      assertEquals("wrong newValue",QueueMemberState.DEVICE_BUSY,evt.getNewValue());
      assertEquals("wrong queue member",queueMember,evt.getSource());
      numberOfChanges++;
    }
  }
);
  queueMember.stateChanged(QueueMemberState.DEVICE_BUSY);
  assertEquals("wrong number of propagated changes",1,numberOfChanges);
}
