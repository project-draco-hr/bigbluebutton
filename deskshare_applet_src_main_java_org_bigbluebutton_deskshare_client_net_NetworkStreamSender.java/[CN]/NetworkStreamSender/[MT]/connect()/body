{
  socketSenders=new NetworkSocketStreamSender[numThreads];
  int failedAttempts=0;
  for (int i=0; i < numThreads; i++) {
    try {
      createSender(i);
      numRunningThreads++;
    }
 catch (    ConnectionException e) {
      failedAttempts++;
    }
  }
  if ((failedAttempts == numThreads) && httpTunnel) {
    System.out.println("Trying http tunneling");
    failedAttempts=0;
    numRunningThreads=0;
    if (tryHttpTunneling()) {
      tunneling=true;
      System.out.println("Will use http tunneling");
      httpSenders=new NetworkHttpStreamSender[numThreads];
      for (int i=0; i < numThreads; i++) {
        try {
          createHttpSender(i);
          numRunningThreads++;
        }
 catch (        ConnectionException e) {
          failedAttempts++;
        }
      }
      if (failedAttempts == numThreads) {
        return false;
      }
 else {
        return true;
      }
    }
  }
 else {
    if (numRunningThreads != numThreads) {
      try {
        stop();
      }
 catch (      ConnectionException e) {
        e.printStackTrace();
      }
      return false;
    }
 else {
      return true;
    }
  }
  System.out.println("Http tunneling failed.");
  return false;
}
