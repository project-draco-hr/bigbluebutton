{
  socketSenders=new NetworkSocketStreamSender[numThreads];
  int failedAttempts=0;
  for (int i=0; i < numThreads; i++) {
    try {
      createSender(i);
      numRunningThreads++;
    }
 catch (    ConnectionException e) {
      failedAttempts++;
    }
  }
  if (failedAttempts == numThreads) {
    System.out.println("Trying http tunneling");
    if (tryHttpTunneling()) {
      tunneling=true;
      System.out.println("Will use http tunneling");
      httpSenders=new NetworkHttpStreamSender[numThreads];
      for (int i=0; i < numThreads; i++) {
        createHttpSender(i);
      }
      return true;
    }
  }
 else {
    return true;
  }
  System.out.println("Http tunneling failed.");
  return false;
}
