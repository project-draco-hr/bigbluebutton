{
  int mask;
  int seg;
  int aval;
  if (pcm_val >= 0) {
    mask=0xD5;
  }
 else {
    mask=0x55;
    pcm_val=-pcm_val - 8;
  }
  seg=search(pcm_val,seg_end);
  if (seg >= 8)   return (0x7F ^ mask);
 else {
    aval=seg << SEG_SHIFT;
    if (seg < 2)     aval|=(pcm_val >> 4) & QUANT_MASK;
 else     aval|=(pcm_val >> (seg + 3)) & QUANT_MASK;
    return (aval ^ mask);
  }
}
