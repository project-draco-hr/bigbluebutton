{
  loginfo("Red5SIP login " + uid);
  IConnection conn=Red5.getConnectionLocal();
  IServiceCapableConnection service=(IServiceCapableConnection)conn;
  SIPUser sipUser=sipManager.getSIPUser(uid);
  if (sipUser == null) {
    loginfo("Red5SIP open creating sipUser for " + username + " on sip port "+ sipPort+ " audio port "+ rtpPort+ " uid "+ uid);
    try {
      sipUser=new SIPUser(conn.getClient().getId(),service,sipPort,rtpPort);
      sipManager.addSIPUser(uid,sipUser);
    }
 catch (    Exception e) {
      loginfo("open error " + e);
    }
  }
  sipUser.login(phone,username,password,realm,proxy);
  userNames.put(conn.getClient().getId(),uid);
  sipPort++;
  if (sipPort > stopSIPPort)   sipPort=startSIPPort;
  rtpPort++;
  if (rtpPort > stopRTPPort)   rtpPort=startRTPPort;
}
