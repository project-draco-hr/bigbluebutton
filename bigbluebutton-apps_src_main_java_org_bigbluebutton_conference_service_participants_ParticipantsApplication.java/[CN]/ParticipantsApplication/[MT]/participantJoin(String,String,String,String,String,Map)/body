{
  log.debug("participant joining room " + roomName);
  if (roomsManager.hasRoom(roomName)) {
    Room room=roomsManager.getRoom(roomName);
    Boolean userLocked=false;
    LockSettings ls=room.getLockSettings();
    if (room.isLocked()) {
      if (!"MODERATOR".equals(role))       userLocked=true;
 else {
        if (ls.getAllowModeratorLocking()) {
          userLocked=true;
        }
      }
    }
    User p=new User(userid,username,role,externUserID,status,userLocked);
    room.addParticipant(p);
    log.debug("participant joined room " + roomName);
    return true;
  }
  log.debug("participant failed to join room " + roomName);
  return false;
}
