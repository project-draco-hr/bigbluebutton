{
  long thisRead=getReadBytes();
  if (thisRead > lastBytesRead) {
    lastBytesRead=thisRead;
    return;
  }
  if (lastPongReceived > 0 && lastPingSent - lastPongReceived > maxInactivity) {
    if (log.isDebugEnabled()) {
      log.debug("Scheduled job list");
      for (      String jobName : service.getScheduledJobNames()) {
        log.debug("Job: {}",jobName);
      }
    }
    service.removeScheduledJob(keepAliveJobName);
    keepAliveJobName=null;
    log.warn("Closing clientId {}: no response to ping in {} ",getId(),maxInactivity);
    log.warn("Closing {} due to too much inactivity ({}).",RTMPConnection.this,(lastPingSent - lastPongReceived));
    onInactive();
    return;
  }
  ping();
}
