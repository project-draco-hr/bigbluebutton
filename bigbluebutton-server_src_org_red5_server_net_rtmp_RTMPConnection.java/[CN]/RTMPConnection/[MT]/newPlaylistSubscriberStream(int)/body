{
  if (!reservedStreams.get(streamId - 1)) {
    return null;
  }
synchronized (streams) {
    if (streams.get(streamId - 1) != null) {
      return null;
    }
    PlaylistSubscriberStream pss=(PlaylistSubscriberStream)scope.getContext().getBean("playlistSubscriberStream");
    Integer buffer=streamBuffers.get(streamId - 1);
    if (buffer != null)     pss.setClientBufferDuration(buffer);
    pss.setName(createStreamName());
    pss.setConnection(this);
    pss.setScope(this.getScope());
    pss.setStreamId(streamId);
    registerStream(pss);
    usedStreams++;
    return pss;
  }
}
