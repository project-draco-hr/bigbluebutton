{
  long now=System.currentTimeMillis();
  if ((now - lastVideoTime) > videoTimeout) {
    long numSeconds=(now - lastVideoTime) / 1000;
    Map<String,Object> logData=new HashMap<String,Object>();
    logData.put("meetingId",scope.getName());
    logData.put("userId",userId);
    logData.put("stream",stream.getPublishedName());
    logData.put("packetCount",packetCount);
    logData.put("publishing",publishing);
    logData.put("lastPacketTime (sec)",numSeconds);
    Gson gson=new Gson();
    String logStr=gson.toJson(logData);
    log.warn("Video packet timeout. data={}",logStr);
    if (!streamStopped) {
      streamStopped=true;
      scheduler.removeScheduledJob(timeoutJobName);
      if (publishing) {
        stream.stop();
      }
    }
  }
}
