{
  while (true) {
    Event event;
synchronized (buffer.eventQueue) {
      if (buffer.eventQueue.isEmpty()) {
        buffer.processingCompleted=true;
        break;
      }
      event=(Event)buffer.eventQueue.remove(0);
    }
    processEvent(event.getNextFilter(),buffer.session,event.getType(),event.getData());
  }
  if (logger.isDebugEnabled()) {
    logger.debug("Exiting since queue is empty for " + buffer.session.getRemoteAddress());
  }
}
