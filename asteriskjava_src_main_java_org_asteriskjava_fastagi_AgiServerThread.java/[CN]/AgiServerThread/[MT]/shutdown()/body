{
  if (agiServer == null) {
    throw new IllegalStateException("Mandatory property agiServer is not set.");
  }
  agiServer.shutdown();
  if (thread != null) {
    try {
      thread.join();
    }
 catch (    InterruptedException e) {
      logger.warn("Interrupted while waiting for AgiServer to shutdown.");
    }
    thread=null;
  }
}
