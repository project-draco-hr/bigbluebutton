{
  if (null != servletContext) {
    return;
  }
  System.setProperty("red5.deployment.type","war");
  servletContext=sce.getServletContext();
  String prefix=servletContext.getRealPath("/");
  long time=System.currentTimeMillis();
  logger.info("RED5 Server (http://www.osflash.org/red5)");
  logger.info("WAR loader");
  logger.debug("Path: " + prefix);
  try {
    contextLoader=createContextLoader();
    applicationContext=(ConfigurableWebApplicationContext)contextLoader.initWebApplicationContext(servletContext);
    logger.debug("Root context path: " + applicationContext.getServletContext().getContextPath());
    ConfigurableBeanFactory factory=applicationContext.getBeanFactory();
    factory.registerSingleton("default.context",applicationContext);
    parentFactory=(DefaultListableBeanFactory)factory.getParentBeanFactory();
  }
 catch (  Throwable t) {
    logger.error("",t);
  }
  long startupIn=System.currentTimeMillis() - time;
  logger.info("Startup done in: " + startupIn + " ms");
}
