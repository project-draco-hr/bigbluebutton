{
  ArrayList<Recording> recs=new ArrayList<Recording>();
  List<File> allPublishedDirectories=new ArrayList<File>();
  String[] publishedFormats=getPlaybackFormats(publishedDir);
  for (int i=0; i < publishedFormats.length; ++i) {
    allPublishedDirectories.addAll(getDirectories(publishedDir + File.separatorChar + publishedFormats[i]));
  }
  List<File> allUnpublishedDirectories=new ArrayList<File>();
  String[] unpublishedFormats=getPlaybackFormats(unpublishedDir);
  for (int i=0; i < unpublishedFormats.length; ++i) {
    allUnpublishedDirectories.addAll(getDirectories(unpublishedDir + File.separatorChar + unpublishedFormats[i]));
  }
  if (meetingIds.isEmpty()) {
    meetingIds.addAll(getAllRecordingIds(allPublishedDirectories));
    meetingIds.addAll(getAllRecordingIds(allUnpublishedDirectories));
  }
  log.debug("got all recording ids");
  for (  String meetingId : meetingIds) {
    List<Recording> published=getRecordingsForPath(meetingId,allPublishedDirectories);
    if (!published.isEmpty()) {
      recs.addAll(published);
    }
    List<Recording> unpublished=getRecordingsForPath(meetingId,allUnpublishedDirectories);
    if (!unpublished.isEmpty()) {
      recs.addAll(unpublished);
    }
  }
  return recs;
}
