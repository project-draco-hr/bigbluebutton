{
  char[] buf;
  if (WITH_BYTE_SEPARATOR) {
    buf=new char[length * 3];
  }
 else {
    buf=new char[length * 2];
  }
  for (int i=offset, j=0, k; i < offset + length; ) {
    k=ba[i++];
    buf[j++]=HEX_DIGITS[(k >>> 4) & 0x0F];
    buf[j++]=HEX_DIGITS[k & 0x0F];
    if (WITH_BYTE_SEPARATOR) {
      buf[j++]=BYTE_SEPARATOR;
    }
  }
  return new String(buf);
}
