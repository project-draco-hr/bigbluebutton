{
  if (list.size() < 100) {
    out.writeArray(list,this);
    return;
  }
  int size=list.size();
  int nullCount=0;
  for (int i=0; i < size; i++) {
    if (list.get(i) == null) {
      nullCount++;
    }
  }
  if (nullCount > (size * 0.8)) {
    out.writeMap(list,this);
  }
 else {
    out.writeArray(list,this);
  }
}
