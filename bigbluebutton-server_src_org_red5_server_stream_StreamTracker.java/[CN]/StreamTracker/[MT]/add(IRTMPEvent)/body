{
  relative=true;
  int timestamp=event.getTimestamp();
  int tsOut=0;
switch (event.getDataType()) {
case TYPE_AUDIO_DATA:
    if (firstAudio) {
      tsOut=event.getTimestamp();
      relative=false;
      firstAudio=false;
    }
 else {
      tsOut=timestamp - lastAudio;
    }
  lastAudio=timestamp;
break;
case TYPE_VIDEO_DATA:
if (firstVideo) {
tsOut=event.getTimestamp();
relative=false;
firstVideo=false;
}
 else {
tsOut=timestamp - lastVideo;
}
lastVideo=timestamp;
break;
case TYPE_NOTIFY:
case TYPE_INVOKE:
if (firstNotify) {
tsOut=event.getTimestamp();
relative=false;
firstNotify=false;
}
 else {
tsOut=timestamp - lastNotify;
}
lastNotify=timestamp;
break;
default :
break;
}
return tsOut;
}
