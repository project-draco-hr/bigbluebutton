{
  if (!checkForEmptyDirectories) {
    return;
  }
  String dir;
  Resource resFile=resources.getResource(base.substring(0,base.lastIndexOf('/')));
  try {
    dir=resFile.getFile().getAbsolutePath();
  }
 catch (  IOException err) {
    return;
  }
  while (!dir.equals(rootDir)) {
    File fp=new File(dir);
    if (!fp.isDirectory()) {
      break;
    }
    if (fp.list().length != 0) {
      break;
    }
    if (!fp.delete()) {
      break;
    }
    dir=fp.getParent();
  }
}
