{
  if (showInfo)   log.info("Incomming: " + session.getRemoteAddress().toString());
  ByteBuffer data=(ByteBuffer)message;
  log.info(HexDump.prettyPrintHex(data.asReadOnlyBuffer().array()));
  final byte type=data.get();
  data.position(0);
switch (type) {
case NOOP:
    break;
case JOIN:
  if (!sessions.contains(session)) {
    sessions.add(session);
    join(session);
  }
break;
case LIST:
list(session);
break;
case SEND:
broadcast(session,data);
break;
case EXIT:
if (sessions.contains(session)) {
sessions.remove(session);
session.close();
leave(session);
}
break;
default :
if (showInfo) log.info("Unknown (play echo): " + session.getRemoteAddress().toString());
echo(session,data);
break;
}
}
