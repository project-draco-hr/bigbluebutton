{
  processMessages=true;
  executor.execute(new Runnable(){
    public void run(){
      Message msg;
      while (processMessages) {
        try {
          msg=messages.take();
          processMessage(msg);
        }
 catch (        InterruptedException e) {
          log.error("InterruptedException while waiting for messages");
          stop();
        }
      }
    }
  }
);
}
