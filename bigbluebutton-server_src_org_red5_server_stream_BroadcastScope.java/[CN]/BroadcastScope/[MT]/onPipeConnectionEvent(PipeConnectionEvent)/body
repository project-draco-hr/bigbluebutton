{
switch (event.getType()) {
case PipeConnectionEvent.CONSUMER_CONNECT_PULL:
case PipeConnectionEvent.CONSUMER_CONNECT_PUSH:
case PipeConnectionEvent.PROVIDER_CONNECT_PULL:
case PipeConnectionEvent.PROVIDER_CONNECT_PUSH:
    compCounter++;
  break;
case PipeConnectionEvent.CONSUMER_DISCONNECT:
case PipeConnectionEvent.PROVIDER_DISCONNECT:
compCounter--;
if (compCounter <= 0) {
if (hasParent()) {
  IProviderService providerService=(IProviderService)getParent().getContext().getBean(IProviderService.BEAN_NAME);
  providerService.unregisterBroadcastStream(getParent(),getName());
}
hasRemoved=true;
}
break;
default :
throw new UnsupportedOperationException("Event type not supported: " + event.getType());
}
}
