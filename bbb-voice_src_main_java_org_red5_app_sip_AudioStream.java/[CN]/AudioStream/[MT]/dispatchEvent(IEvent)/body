{
  if (event instanceof IRTMPEvent) {
    IRTMPEvent rtmpEvent=(IRTMPEvent)event;
    if (livePipe != null) {
      RTMPMessage msg=new RTMPMessage();
      msg.setBody(rtmpEvent);
      if (creationTime == null)       creationTime=(long)rtmpEvent.getTimestamp();
      try {
        livePipe.pushMessage(msg);
        if (rtmpEvent instanceof IStreamPacket) {
          System.out.println("dispatchEvent(IStreamPacket:)" + event);
          for (          IStreamListener listener : getStreamListeners()) {
            try {
              System.out.println("dispatchEvent(event:)" + event);
              listener.packetReceived(this,(IStreamPacket)rtmpEvent);
            }
 catch (            Exception e) {
              log.error("Error while notifying listener " + listener,e);
            }
          }
        }
      }
 catch (      IOException ex) {
        log.error("Got exception: {}",ex);
      }
    }
  }
}
