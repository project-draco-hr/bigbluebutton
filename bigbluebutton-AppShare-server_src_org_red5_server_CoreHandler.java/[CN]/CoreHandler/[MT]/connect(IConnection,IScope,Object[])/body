{
  log.debug("Connect to core handler ?");
  String id=conn.getSessionId();
  IScope connectionScope=Red5.getConnectionLocal().getScope();
  log.debug("Connection scope: {}",(connectionScope == null ? "is null" : "not null"));
  if (connectionScope == null) {
    return false;
  }
  IClientRegistry clientRegistry=connectionScope.getContext().getClientRegistry();
  log.debug("Client registry: {}",(clientRegistry == null ? "is null" : "not null"));
  IClient client=clientRegistry.hasClient(id) ? clientRegistry.lookupClient(id) : clientRegistry.newClient(params);
  conn.initialize(client);
  return true;
}
