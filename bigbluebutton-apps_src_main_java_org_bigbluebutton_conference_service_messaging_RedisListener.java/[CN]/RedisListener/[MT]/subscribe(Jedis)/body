{
  log.debug("subscribe init...");
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      jedis.psubscribe(new JedisPubSub(){
        private Logger log2=Red5LoggerFactory.getLogger(JedisPubSub.class,"bigbluebutton");
        @Override public void onUnsubscribe(        String arg0,        int arg1){
        }
        @Override public void onSubscribe(        String arg0,        int arg1){
        }
        @Override public void onPUnsubscribe(        String arg0,        int arg1){
        }
        @Override public void onPSubscribe(        String arg0,        int arg1){
          log.debug("subscribe to: " + arg0 + " "+ arg1);
        }
        @Override public void onPMessage(        String pattern,        String channel,        String message){
          log2.debug("messsage " + pattern + channel+ message);
          if (channel.equalsIgnoreCase("bigbluebutton:meeting:request")) {
            String[] args=message.split(":");
            String roomname=args[0];
            String type=args[1];
            if (type.equalsIgnoreCase("end")) {
              roomsManager.endMeetingRequest(roomname);
            }
          }
 else           if (channel.equalsIgnoreCase("bigbluebutton:meeting:presentation")) {
            log2.debug("receiving message " + message);
            Gson gson=new Gson();
            HashMap<String,Object> map=gson.fromJson(message,new TypeToken<Map<String,String>>(){
            }
.getType());
            messageListener.handleReceivedMessage(map);
          }
        }
        @Override public void onMessage(        String channel,        String message){
          log2.debug("messsage " + channel + message);
        }
      }
,"bigbluebutton:meeting:*");
    }
  }
);
  t.start();
}
