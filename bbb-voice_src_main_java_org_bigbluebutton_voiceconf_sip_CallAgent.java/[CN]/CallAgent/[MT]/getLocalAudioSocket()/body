{
  DatagramSocket socket=null;
  boolean failedToGetSocket=true;
  for (int i=0; i < 3; i++) {
    try {
      socket=new DatagramSocket(portProvider.getFreeAudioPort());
      failedToGetSocket=false;
      break;
    }
 catch (    SocketException e) {
      log.error("Failed to setup local audio socket.");
    }
  }
  if (failedToGetSocket) {
    throw new Exception("Exception while initializing CallStream");
  }
  return socket;
}
