{
  DatagramSocket socket=null;
  boolean failedToGetSocket=true;
  for (int i=portProvider.getStartAudioPort(); i <= portProvider.getStopAudioPort(); i++) {
    int freePort=portProvider.getFreeAudioPort();
    try {
      socket=new DatagramSocket(freePort);
      failedToGetSocket=false;
      log.info("Successfully setup local audio port {}.",freePort);
      break;
    }
 catch (    SocketException e) {
      log.warn("Failed to setup local audio port {}.",freePort);
    }
  }
  if (failedToGetSocket) {
    throw new Exception("Exception while initializing CallStream");
  }
  return socket;
}
