{
  String firstLine=response.getBodyLines().get(0);
  if (!firstLine.startsWith("<?xml")) {
    log.error("Not XML: [{}]",firstLine);
    return;
  }
  XMLResponseConferenceListParser confXML=new XMLResponseConferenceListParser();
  SAXParserFactory spf=SAXParserFactory.newInstance();
  try {
    SAXParser sp=spf.newSAXParser();
    String responseBody=org.springframework.util.StringUtils.collectionToDelimitedString(response.getBodyLines(),"\n");
    log.debug("xml_list responce\n{}\nEND",responseBody);
    responseBody=responseBody.trim().replaceFirst("^([\\W]+)<","<");
    ByteArrayInputStream bs=new ByteArrayInputStream(responseBody.getBytes());
    sp.parse(bs,confXML);
    VoiceUserJoinedEvent pj;
    for (    ConferenceMember member : confXML.getConferenceList()) {
      log.debug("conf list member [{}] for room [{}].",member.getId(),confXML.getConferenceRoom());
      String callerId=member.getCallerId();
      String callerIdName=member.getCallerIdName();
      String voiceUserId=callerIdName;
      Matcher matcher=CALLERNAME_PATTERN.matcher(callerIdName);
      if (matcher.matches()) {
        voiceUserId=matcher.group(1).trim();
        callerIdName=matcher.group(2).trim();
      }
      pj=new VoiceUserJoinedEvent(voiceUserId,member.getId().toString(),confXML.getConferenceRoom(),callerId,callerIdName,member.getMuted(),member.getSpeaking());
      eventListener.handleConferenceEvent(pj);
    }
  }
 catch (  SAXException se) {
    log.error("Cannot parse repsonce. ",se);
  }
catch (  ParserConfigurationException pce) {
    log.error("ParserConfigurationException. ",pce);
  }
catch (  IOException ie) {
    log.error("Cannot parse repsonce. IO Exception. ",ie);
  }
}
