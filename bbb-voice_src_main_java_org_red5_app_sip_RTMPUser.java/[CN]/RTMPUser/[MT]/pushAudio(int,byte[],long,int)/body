{
  if (buffer == null) {
    buffer=IoBuffer.allocate(1024);
    buffer.setAutoExpand(true);
  }
  buffer.clear();
  buffer.put((byte)codec);
  byte[] copy=new byte[audio.length];
  System.arraycopy(audio,0,copy,0,audio.length);
  buffer.put(copy);
  buffer.flip();
  AudioData audioData=new AudioData(buffer);
  audioData.setTimestamp((int)ts);
  kt++;
  if (kt < 10) {
    logger.debug("+++ " + audioData);
    System.out.println("+++ " + audioData);
  }
  RTMPMessage rtmpMsg=new RTMPMessage();
  rtmpMsg.setBody(audioData);
  publishStreamData(publishStreamId,rtmpMsg);
}
