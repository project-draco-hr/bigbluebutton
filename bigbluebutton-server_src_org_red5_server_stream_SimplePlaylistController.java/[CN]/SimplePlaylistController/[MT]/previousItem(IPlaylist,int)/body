{
  if (itemIndex > playlist.getItemSize()) {
    return playlist.getItemSize() - 1;
  }
  if (playlist.isRepeat()) {
    return itemIndex;
  }
  if (playlist.isRandom()) {
    Random rand=new Random();
    int lastIndex=itemIndex;
    while (itemIndex == lastIndex) {
      itemIndex=rand.nextInt(playlist.getItemSize());
    }
    lastIndex=itemIndex;
    return itemIndex;
  }
  int prevIndex=itemIndex - 1;
  if (prevIndex >= 0) {
    return prevIndex;
  }
 else   if (playlist.isRewind()) {
    return playlist.getItemSize() - 1;
  }
 else {
    return -1;
  }
}
