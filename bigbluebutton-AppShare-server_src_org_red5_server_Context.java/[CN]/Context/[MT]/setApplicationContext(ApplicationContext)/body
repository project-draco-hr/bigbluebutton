{
  this.applicationContext=context;
  String deploymentType=System.getProperty("red5.deployment.type");
  logger.debug("Deployment type: " + deploymentType);
  if (deploymentType == null) {
    String config=System.getProperty("red5.conf_file");
    if (config == null) {
      config="red5.xml";
    }
    coreContext=ContextSingletonBeanFactoryLocator.getInstance(config).useBeanFactory("red5.core").getFactory();
  }
 else {
    logger.info("Setting parent bean factory as core");
    coreContext=applicationContext.getParentBeanFactory();
  }
}
