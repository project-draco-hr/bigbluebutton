{
  final ChannelStateHistoryEntry historyEntry;
  final ChannelState oldState=this.state;
  if (oldState == state) {
    return;
  }
  historyEntry=new ChannelStateHistoryEntry(date,state);
synchronized (stateHistory) {
    stateHistory.add(historyEntry);
  }
  this.state=state;
  firePropertyChange(PROPERTY_STATE,oldState,state);
}
