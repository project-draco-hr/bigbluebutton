{
  processBlocks=true;
  while (processBlocks) {
    EncodedBlockData block;
    try {
      block=retriever.fetchNextBlockToSend();
      BlockVideoData bv=new BlockVideoData(room,block.getPosition(),block.getVideoData(),false);
      System.out.println("Sending block " + block.getPosition());
      sendBlock(bv);
    }
 catch (    InterruptedException e) {
      e.printStackTrace();
    }
  }
}
