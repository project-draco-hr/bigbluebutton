{
  if (!hasSharedObject(conn.getScope(),"chatSO")) {
    if (!createSharedObject(conn.getScope(),"chatSO",false))     System.out.println("Sharedobject::chatSO could not be created");
  }
  ISharedObject so=getSharedObject(conn.getScope(),"chatSO",false);
  if (so == null) {
    System.out.println("SharedObject was not created");
    return false;
  }
  if (conn instanceof IServiceCapableConnection) {
    IServiceCapableConnection sc=(IServiceCapableConnection)conn;
    String chatLog=chatListener.getChatLog();
    sc.invoke("setChatLog",new Object[]{chatLog});
  }
  return true;
}
