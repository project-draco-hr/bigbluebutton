{
  if (this == ByteBuffer.getAllocator()) {
    throw new IllegalStateException("This allocator is in use.");
  }
  expirer.shutdown();
synchronized (containerStack) {
    containerStack.clear();
  }
  for (int i=directBufferStacks.length - 1; i >= 0; i--) {
    ExpiringStack stack=directBufferStacks[i];
synchronized (stack) {
      stack.clear();
    }
  }
  for (int i=heapBufferStacks.length - 1; i >= 0; i--) {
    ExpiringStack stack=heapBufferStacks[i];
synchronized (stack) {
      stack.clear();
    }
  }
  disposed=true;
}
